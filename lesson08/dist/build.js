(()=>{var t={450:()=>{Vue.component("cart-list",{props:["items","visible","price","count"],template:'\n        <div v-if="visible" class="cart-list">\n            <cart-item v-for="cartItem in items" :key="cartItem.id_product" :item="cartItem"></cart-item>\n            <div class="cart-total">\n                <div>В корзине {{ totalCount }} товара(-ов) на сумму {{ totalPrice }} руб</div>\n            </div>\n        </div>',computed:{totalPrice(){return this.items.reduce(((t,e)=>t+e.price*e.quantity),0)},totalCount(){return this.items.reduce(((t,e)=>t+e.quantity),0)}}}),Vue.component("cart-item",{props:["item"],template:'\n        <div class="cart-item">\n            <div>\n                <p class="cartItemTitle">Наименование: {{ item.product_name }}</p>\n                <p>Цена: {{ item.price }} руб</p>\n                <p>Кол-во: {{ item.quantity }}</p>\n            </div>\n            <div class="remove-btn" @click="$parent.$emit(\'remove-item\', item)">&ndash;</i></div>\n        </div>'})},888:()=>{Vue.component("error-connect",{props:["visible"],template:'\n        <div v-show="visible" class="errorConnect">\n            Ошибка соединения с сервером\n        </div>'})},118:()=>{Vue.component("goods-list",{props:["goods"],template:'\n        <div v-if="goods.length > 0" class="goods-list">\n            <goods-item v-for="good in goods" :key="good.id_product" :good="good"></goods-item>\n        </div>\n        <div v-else class="goods-list goods-empty">\n            <h2>Список товаров пуст</h2>\n        </div>'}),Vue.component("goods-item",{props:["good"],template:'\n        <div class="goods-item">\n            <h3>{{ good.product_name }}</h3>\n            <img class="good-img" alt="Product img">\n            <p>{{ good.price }} руб </p>\n            <div class="add-button" @click="$parent.$emit(\'add-product\', good)">В корзину</div>\n        </div>'})},414:()=>{Vue.component("goods-search",{template:'\n        <div class="search-bar">\n            <input type="text" class="goods-search" v-model="$root.searchLine">\n            <div class="search-button" @click="$emit(\'filter-goods\')">Найти</div>\n        </div>'})},247:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var o=n(81),r=n.n(o),i=n(645),s=n.n(i)()(r());s.push([t.id,'* {\n  margin: 0;\n  padding: 0;\n}\n\n.nav-bar {\n  background: linear-gradient(to top left, #66CDAA, white);\n  padding: 16px 8px;\n  display: flex;\n  justify-content: flex-end;\n}\n.nav-bar .search-bar {\n  display: flex;\n}\n.nav-bar .cart-button, .nav-bar .search-button {\n  margin-left: 8px;\n  padding: 8px 16px;\n  border: 1px solid #66CDAA;\n  background-color: #F0FFF0;\n  cursor: default;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.nav-bar .cart-button:hover, .nav-bar .search-button:hover {\n  background-color: #66CDAA;\n  color: white;\n  border-color: white;\n}\n.nav-bar .pushed-btn {\n  background-color: #66CDAA;\n  color: white;\n  border-color: white;\n}\n.nav-bar .goods-search {\n  font-family: "Times New Roman", sans-serif;\n  font-size: 16px;\n  border: 1px solid #66CDAA;\n  background-color: #F0FFF0;\n  padding-left: 8px;\n}\n.nav-bar .goods-search:focus {\n  outline: 1px solid white;\n  border-color: white;\n}\n\n.goods-list {\n  display: flex;\n  flex-wrap: wrap;\n}\n.goods-list .goods-item {\n  background: linear-gradient(to top left, #66CDAA, white);\n  min-width: 200px;\n  min-height: 250px;\n  margin: 16px;\n  padding: 8px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  box-sizing: border-box;\n}\n.goods-list .good-img {\n  background: linear-gradient(to top left, #66CDAA, white);\n  margin-top: 16px;\n  margin-bottom: 16px;\n  border: 1px solid #66CDAA;\n  width: 150px;\n  height: 100px;\n}\n.goods-list .add-button {\n  border: 1px solid #66CDAA;\n  background-color: #F0FFF0;\n  padding: 8px;\n  cursor: default;\n  max-width: 70%;\n  margin: 16px auto 8px;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.goods-list .add-button:hover {\n  background-color: #66CDAA;\n  color: white;\n  border-color: white;\n}\n\n.goods-empty, .cart-empty {\n  margin: 16px;\n}\n\n.errorConnect {\n  background: linear-gradient(to top left, #F08080, white);\n  margin: 16px;\n  padding: 8px;\n}\n\n.main {\n  position: relative;\n}\n\n.cart-list {\n  margin-top: 0px;\n  position: absolute;\n  z-index: 10;\n  right: 0;\n  top: 0;\n  min-width: 500px;\n  background-color: #F0FFF0;\n}\n.cart-list .cart-item, .cart-list .cart-total {\n  background: linear-gradient(to top left, #66CDAA, white);\n  margin: 16px;\n  padding: 8px;\n}\n.cart-list .cart-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.cart-list .cart-total {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.cart-list .clear-button, .cart-list .remove-btn {\n  padding: 8px;\n  cursor: default;\n  background-color: #F0FFF0;\n  border: 1px solid #66CDAA;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.cart-list .clear-button:hover, .cart-list .remove-btn:hover {\n  background-color: #66CDAA;\n  color: white;\n  border-color: white;\n}\n.cart-list .cartItemTitle {\n  font-weight: 700;\n}',""]);const a=s},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",o=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),o&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),o&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,o,r,i){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(o)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(s[c]=!0)}for(var d=0;d<t.length;d++){var l=[].concat(t[d]);o&&s[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),r&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=r):l[4]="".concat(r)),e.push(l))}},e}},81:t=>{"use strict";t.exports=function(t){return t[1]}},379:t=>{"use strict";var e=[];function n(t){for(var n=-1,o=0;o<e.length;o++)if(e[o].identifier===t){n=o;break}return n}function o(t,o){for(var i={},s=[],a=0;a<t.length;a++){var c=t[a],d=o.base?c[0]+o.base:c[0],l=i[d]||0,p="".concat(d," ").concat(l);i[d]=l+1;var u=n(p),m={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==u)e[u].references++,e[u].updater(m);else{var h=r(m,o);o.byIndex=a,e.splice(a,0,{identifier:p,updater:h,references:1})}s.push(p)}return s}function r(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var i=o(t=t||[],r=r||{});return function(t){t=t||[];for(var s=0;s<i.length;s++){var a=n(i[s]);e[a].references--}for(var c=o(t,r),d=0;d<i.length;d++){var l=n(i[d]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}i=c}}},569:t=>{"use strict";var e={};t.exports=function(t,n){var o=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(n)}},216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var o="";n.supports&&(o+="@supports (".concat(n.supports,") {")),n.media&&(o+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(o+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),o+=n.css,r&&(o+="}"),n.media&&(o+="}"),n.supports&&(o+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(o,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={id:o,exports:{}};return t[o](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0,(()=>{"use strict";n(450),n(888),n(118),n(414);var t=n(379),e=n.n(t),o=n(795),r=n.n(o),i=n(569),s=n.n(i),a=n(565),c=n.n(a),d=n(216),l=n.n(d),p=n(589),u=n.n(p),m=n(247),h={};h.styleTagTransform=u(),h.setAttributes=c(),h.insert=s().bind(null,"head"),h.domAPI=r(),h.insertStyleElement=l(),e()(m.Z,h),m.Z&&m.Z.locals&&m.Z.locals;const g="https://raw.githubusercontent.com/GeekBrainsTutorial/online-store-api/master/responses";new Vue({el:"#app",data:{goods:[],filteredGoods:[],searchLine:"",isVisibleCart:!1,cartList:[],isError:!1},methods:{makeGETRequest:t=>new Promise((e=>{var n;window.XMLHttpRequest?n=new XMLHttpRequest:window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLHTTP")),n.onreadystatechange=function(){4===n.readyState&&e(n.responseText)},n.open("GET",t,!0),n.send()})),filterGoods(){const t=new RegExp(this.searchLine,"i");this.filteredGoods=this.goods.filter((e=>t.test(e.product_name)))},getProduct(t){return this.goods.find((e=>e.id_product==t.target.dataset.id))},addCartItem(t){this.makeGETRequest(`${g}/addToBasket.json`).then((e=>{if(1===JSON.parse(e).result){const e=this.cartList.find((e=>e.id_product==t.id_product));e?e.quantity++:this.cartList.push({...t,quantity:1})}})).catch((t=>{console.log(t),this.isError=!0}))},removeCartItem(t){this.makeGETRequest(`${g}/deleteFromBasket.json`).then((e=>{if(1===JSON.parse(e).result){const e=this.cartList.find((e=>e.id_product==t.id_product));if(!e)return;if(e.quantity>1)e.quantity--;else{const t=this.cartList.indexOf(e);this.cartList.splice(t,1)}}})).catch((t=>{console.log(t),this.isError=!0}))},cartVisible(){this.isVisibleCart=!this.isVisibleCart,document.querySelector(".cart-button").classList.toggle("pushed-btn")}},mounted(){this.makeGETRequest(`${g}/catalogData.json`).then((t=>{this.goods=JSON.parse(t),this.filteredGoods=JSON.parse(t)})).catch((t=>{console.log(t),this.isError=!0})),this.makeGETRequest(`${g}/getBasket.json`).then((t=>{this.cartList=JSON.parse(t).contents})).catch((t=>{console.log(t),this.isError=!0}))}})})()})();